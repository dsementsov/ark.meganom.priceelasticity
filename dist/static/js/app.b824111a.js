(function(t){function e(e){for(var i,a,o=e[0],c=e[1],l=e[2],v=0,p=[];v<o.length;v++)a=o[v],r[a]&&p.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1313:function(t,e,n){},1914:function(t,e,n){},"21bb":function(t,e,n){"use strict";var i=n("1914"),r=n.n(i);r.a},2856:function(t,e,n){},"363a":function(t,e,n){"use strict";var i=n("1313"),r=n.n(i);r.a},"3e91":function(t,e,n){"use strict";var i=n("999e"),r=n.n(i);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),n("router-link",{attrs:{to:"/config"}},[t._v("Config")]),t._v(" |\n    "),n("router-link",{attrs:{to:"/upload"}},[t._v("Upload New File")]),t._v(" |\n    "),n("router-link",{attrs:{to:"/theory"}},[t._v("Theory")])],1),n("router-view")],1)},s=[],a=(n("5c0b"),n("2877")),o={},c=Object(a["a"])(o,r,s,!1,null,null,null);c.options.__file="App.vue";var l=c.exports,u=n("8c4f"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{attrs:{id:"config"}},[n("div",{staticClass:"input-field col s12"},[n("select",{attrs:{id:"config_ticket_type",required:""}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Выбрать тип билета")]),n("option",{attrs:{value:"all"}},[t._v("Все")]),t._l(t.ticketTypes,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2),n("label",[t._v("Тип билета")])]),t._m(0),t._m(1),t._m(2),n("div")]),n("button",{staticClass:"btn right",on:{click:function(e){t.get_data()}}},[t._v("Получить данные")]),n("div",{attrs:{id:"results"}})])},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-field col s12"},[n("select",{attrs:{id:"config_season",required:""}},[n("option",{attrs:{value:"null",disabled:"",selected:""}},[t._v("Выбрать сезон")]),n("option",{attrs:{value:"all"}},[t._v("Все")]),n("option",{attrs:{value:"high"}},[t._v("Высокий")]),n("option",{attrs:{value:"mid"}},[t._v("Средний")]),n("option",{attrs:{value:"low"}},[t._v("Низкий")])]),n("label",[t._v("Сезон")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-field col s12"},[n("select",{attrs:{id:"config_workday",required:""}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Выбрать день")]),n("option",{attrs:{value:"all"}},[t._v("Все")]),n("option",{attrs:{value:"1"}},[t._v("Рабочий день")]),n("option",{attrs:{value:"0"}},[t._v("Выходной")])]),n("label",[t._v("Тип дня")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-field col s12"},[n("select",{attrs:{id:"config_intercept",required:""}},[n("option",{attrs:{value:"",disabled:""}},[t._v("Включить интерцепт")]),n("option",{attrs:{value:"1",selected:""}},[t._v("Да - Рекомендовано")]),n("option",{attrs:{value:"0"}},[t._v("Нет")])]),n("label",[t._v("Интерцепт")])])}],_=n("bc3a"),f=n.n(_),d=f.a.create({baseURL:"/api/",timeout:5e3,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(function(t){return t.headers["Authorization"]="Fake Token",t}),d.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var h={fetchResults:function(t,e,n,i){return d.get("price-elasticity/roots/".concat(t,"/").concat(e,"/").concat(n,"/").concat(i),{timeout:0}).then(function(t){return t.data})},getTicketTypes:function(){return d.get("price-elasticity/ticket-types").then(function(t){return t.data})},getConfig:function(){return d.get("price-elasticity/config").then(function(t){return t.data.message})},postConfig:function(t){return d.post("price-elasticity/config",t).then(function(t){return t.data})}},m={name:"home",data:function(){return{s:{high:"Высокий",mid:"Средний",low:"Низкий"},w:{1:"Да",0:"Нет"},ticketTypes:[]}},beforeMount:function(){var t=this;h.getTicketTypes().then(function(e){t.ticketTypes=e.message;var n=document.querySelector("#config_ticket_type");for(var i in e.message){var r=document.createElement("option");r.value=e.message[i],r.text=e.message[i],n.append(r)}var s=document.querySelectorAll("select"),a={};M.FormSelect.init(s,a)})},methods:{get_data:function(){var t=this,e=document.querySelector("#config_ticket_type").value,n=document.querySelector("#config_season").value,i=document.querySelector("#config_workday").value,r=document.querySelector("#config_intercept").value;""!==e&&""!==n&&""!==i?h.fetchResults(e,n,i,r).then(function(e){for(var n in t.displayResults("<h4>Максимизация прибыли согласно модели</h4>",!0),e.message){var i=e.message[n];t.displayResults(t.shapeReults({ticketType:i.type,season:i.season,workday:i.workday},{p:i.p,q:i.q,r:i.adj_r}),!1)}}):this.displayResults("Пожалуйста сделайте выбор!")},displayResults:function(t,e){var n=document.querySelector("#results");e&&(n.innerHTML=""),n.innerHTML=n.innerHTML+"<br>"+t},shapeReults:function(t,e){var n="<p>Тип билета: "+t.ticketType+"</p><p>Сезон: "+this.s[t.season]+"</p><p>Рабочий день: "+this.w[t.workday]+"</p><p>Оптимальная цена: "+e.p+"</p><p>Количество проданых билетов: "+e.q+"</p><p>Adjusted R squared: "+e.r+"</p>";return n}}},y=m,b=(n("21bb"),Object(a["a"])(y,v,p,!1,null,null,null));b.options.__file="Home.vue";var g=b.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("Backend Resources Demo")]),n("p",[t._v("Click on the links below to fetch data from the Flask server")]),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.fetchResource(e)}}},[t._v("Fetch")]),n("br"),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.fetchSecureResource(e)}}},[t._v("Fetch Secure Resource")]),n("h4",[t._v("Results")]),t._l(t.resources,function(e){return n("p",{key:e.timestamp},[t._v("\n    Server Timestamp: "+t._s(t._f("formatTimestamp")(e.timestamp))+"\n  ")])}),n("p",[t._v(t._s(t.error))])],2)},k=[],w={name:"about",data:function(){return{resources:[],error:""}},methods:{fetchResource:function(){var t=this;h.fetchResource().then(function(e){t.resources.push(e)}).catch(function(e){t.error=e.message})},fetchSecureResource:function(){var t=this;h.fetchSecureResource().then(function(e){t.resources.push(e)}).catch(function(e){t.error=e.message})}}},T=w,S=(n("a822"),Object(a["a"])(T,C,k,!1,null,null,null));S.options.__file="Api.vue";var E=S.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",[t._v("Тут вы можете загрузить новый файл")]),n("h6",[t._v("Важно! Структура файла должна быть:")]),n("p",[t._v("Тип билета (текст)")]),n("p",[t._v("Дата (формат: ДД/ММ/ГГГГ)")]),n("p",[t._v("Цена (формат: ХХХХ.ХХ)")]),n("p",[t._v("Количество билетов (формат: ХХХХ)")]),n("p",[t._v("Вы можете поменять именя колонок во вкладке Config")]),t._m(0),n("button",{staticClass:"btn",on:{click:function(e){t.postNewFile()}}},[t._v("Загрузить")]),n("div",{attrs:{id:"result"}})])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{action:"#"}},[n("div",{staticClass:"file-field input-field"},[n("div",{staticClass:"btn"},[n("span",[t._v("File")]),n("input",{attrs:{type:"file",id:"file"}})]),n("div",{staticClass:"file-path-wrapper"},[n("input",{staticClass:"file-path validate",attrs:{type:"text"}})])])])}],$={methods:{postNewFile:function(){var t=document.querySelector("#file").files[0],e=new FormData;e.append("file",t),fetch("/api/price-elasticity/data",{method:"POST",body:e}).then(function(t){console.log(t),t.ok&&(document.querySelector("#result").innerHTML="<h5>Готово!</5>")})}}},R=$,j=(n("5bca"),Object(a["a"])(R,q,x,!1,null,"2cdf02ab",null));j.options.__file="File.vue";var O=j.exports,F=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-align"},[n("h3",[t._v("Предположения")]),n("h4",[t._v("Сильные")]),n("br"),n("h5",[t._v("Клиенты не имеют предпочтений кроме цены к детскому центру")]),n("h6",[t._v("Так как выборка данных не репрезентативна на уровне предприятия мы не можем судить о брендовых предпочтений клиентов. Следовательно центром нашего анализа будет выступать цена.")]),n("br"),n("h5",[t._v("Регион города Симферополя не влияет на предпочтения клиентов также сильно как цена")]),n("h6",[t._v("Так как целью анализа является влияние цены на спрос, на первом этапе мы не обращаем внимание на разницу в районах города.")]),n("br"),n("h4",[t._v("Слабые")]),n("br"),n("h5",[t._v("Ценовой регион в г.Симферополь отличается от ценового региона других городов Крыма")]),n("h6",[t._v("Типаж городов разный а значит мы фокусируем наше внимание на анализ по г. Симферополь.")]),n("br"),n("h5",[t._v("Присутствует достаточно сильный сезонный эффект")]),n("h6",[t._v("Анализ будет проведен посезонно.")]),n("br"),n("h5",[t._v("Присутствует достаточно сильный эффект выходного дня")]),n("h6",[t._v("Эластичность спроса зависит от того выходной ли день в момент покупки билета.")]),n("br"),n("h5",[t._v("Родителям менее важна цена взрослого билета")]),n("h6",[t._v("Предварительный анализ будет проведен на уровне цены Детского билета (СВП Детские)")]),n("br"),n("h5",[t._v("Месяц и очередность месяцев не имеют такого большого значения как тип сезона (Слабый / Сильный / Средний)")]),n("br"),n("h3",[t._v("Нормализация")]),n("br"),n("h4",[t._v("Нормализация в данном случае происходит в 4х частях")]),n("h6",[t._v("3 - Мы распределяем цены по ведрам (50-50 ведер должно быть достаточно) тем самым сглаживая функцию по оси цены")]),n("h6",[t._v("4 - Мы берем натуральный логарифм количества тем самым сглаживая эффект случайных клиентов")]),n("br"),n("h3",[t._v("Внешний вид функции")]),n("br"),n("h6",[t._v("Согласно экономической теории функция спроса принимает или линейный вид с негативным наклоном или concave квадратичной фунции")]),n("br"),n("h3",[t._v("Получение экстренумов как максимизация дохода")]),n("br"),n("h4",[t._v("Формулы")]),n("p",[t._v("TR (Total revenue) = Quantity * Price")]),n("p",[t._v("𝑙𝑜𝑔(𝑄𝑢𝑎𝑛𝑡𝑖𝑡𝑦)=𝑎∗𝑝2+𝑏∗𝑝+𝑐")]),n("p",[t._v("Где log - натуральный логарифм Так как натуральный логарифм это безопасное симметричное преобразование мы можем его сокращать следующим путем:")]),n("p",[t._v("𝑙𝑜𝑔(𝑄𝑢𝑎𝑛𝑡𝑖𝑡𝑦)=𝑎∗𝑝2+𝑏∗𝑝+𝑐")]),n("p",[t._v("𝑄=(𝑎∗𝑝2+𝑏∗𝑝+𝑐)𝑒")]),n("h4",[t._v("Подставляем в формулу дохода")]),n("p",[t._v("𝑇𝑅=(𝑎𝑝2+𝑏𝑝+𝑐)𝑒∗𝑝")]),n("br"),n("h4",[t._v("Первая функиця - квадратичная с интерcептом")]),n("p",[t._v("Для максимизации прибыли берем первый дериватив и прировнять к 0 - с интерцептом")]),n("p",[t._v("𝑑𝑇𝑅/𝑑𝑝=(𝑎𝑝2+𝑏𝑝+𝑐)𝑒−1((2𝑒+1)𝑎𝑝2+(𝑒+1)𝑏𝑝+𝑐)=!0")]),n("p",[t._v("Очевидно что при этом одна из частей мультипликации должна равняться 0")]),n("p",[t._v("часть  (𝑎𝑝2+𝑏𝑝+𝑐)𝑒−1  приравнивается к  (𝑎𝑝2+𝑏𝑝+𝑐)  и имеет стандартные корни")]),n("p",[t._v("часть  ((2𝑒+1)𝑎𝑝2+(𝑒+1)𝑏𝑝+𝑐)  это обычное квадратное уравнение")]),n("br"),n("h4",[t._v("Вторая функция - квадратичная без интерцепта приводится к следующей форме")]),n("p",[t._v("((2e+1)𝑎𝑥+(e+1)𝑏)(𝑎𝑥2+𝑏𝑥)e / 𝑎𝑥+𝑏")]),n("p",[t._v("Очевидно что левая половина возвращает отрицательную или слишком низкую цену что нам не подходит.")]),n("p",[t._v("Правая часть формулы - обычное квадратное уравнение с с = 0")])])}],A={},D=A,H=(n("3e91"),Object(a["a"])(D,F,P,!1,null,null,null));H.options.__file="Theory.vue";var L=H.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),n("button",{staticClass:"btn right",on:{click:function(e){t.updateValues()}}},[t._v("Обновить настройки")])])},U=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("h5",[t._v("Названия колонок")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Тип билета")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_ticket_type_column",id:"pe_ticket_type_column"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Цена")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_price_column",id:"pe_price_column"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Количество билетов")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_quantity_column",id:"pe_quantity_column"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Дата")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_date_column",id:"pe_date_column"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("h5",[t._v("Настройки модели")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Целевой год")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_target_year",id:"pe_target_year"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Высокий сезон")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_season_high",id:"pe_season_high"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Средний сезон")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_season_weak",id:"pe_season_weak"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6"},[n("p",[t._v("Количество бинов")])]),n("div",{staticClass:"col s6"},[n("input",{staticClass:"input-field",attrs:{type:"text",name:"pe_bins",id:"pe_bins"}})])])}],J={mounted:function(){h.getConfig().then(function(t){var e=document.querySelectorAll("input");for(var n in e)e[n].value=t[e[n].id]})},methods:{updateValues:function(){var t=document.querySelectorAll("input");console.log(t);var e={};for(var n in t)e[t[n].id]=t[n].value;h.postConfig(e).then(function(t){console.log("Done!")})}}},V=J,z=(n("363a"),Object(a["a"])(V,N,U,!1,null,null,null));z.options.__file="Config.vue";var B=z.exports;i["a"].use(u["a"]);var Q=new u["a"]({routes:[{path:"/",name:"home",component:g},{path:"/api",name:"api",component:E},{path:"/upload",name:"uploadFile",component:O},{path:"/theory",name:"theory",component:L},{path:"/config",name:"config",component:B}]}),G=n("2f62");i["a"].use(G["a"]);var I=new G["a"].Store({state:{},mutations:{},actions:{}}),K=(n("456d"),n("ac6a"),{formatTimestamp:function(t){var e=new Date(t);return e.toLocaleTimeString("en-US")}});Object.keys(K).forEach(function(t){i["a"].filter(t,K[t])}),i["a"].config.productionTip=!1,new i["a"]({router:Q,store:I,render:function(t){return t(l)}}).$mount("#app"),i["a"].config.devtools=!0},"5bca":function(t,e,n){"use strict";var i=n("9f3e"),r=n.n(i);r.a},"5c0b":function(t,e,n){"use strict";var i=n("2856"),r=n.n(i);r.a},"999e":function(t,e,n){},"9f3e":function(t,e,n){},a822:function(t,e,n){"use strict";var i=n("a98e"),r=n.n(i);r.a},a98e:function(t,e,n){}});
//# sourceMappingURL=app.b824111a.js.map