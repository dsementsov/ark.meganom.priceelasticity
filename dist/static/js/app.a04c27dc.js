(function (t) { function e (e) { for (var i, s, o = e[0], c = e[1], l = e[2], p = 0, v = []; p < o.length; p++)s = o[p], a[s] && v.push(a[s][0]), a[s] = 0; for (i in c)Object.prototype.hasOwnProperty.call(c, i) && (t[i] = c[i]); u && u(e); while (v.length)v.shift()(); return r.push.apply(r, l || []), n() } function n () { for (var t, e = 0; e < r.length; e++) { for (var n = r[e], i = !0, o = 1; o < n.length; o++) { var c = n[o]; a[c] !== 0 && (i = !1) }i && (r.splice(e--, 1), t = s(s.s = n[0])) } return t } var i = {}, a = {app: 0}, r = []; function s (e) { if (i[e]) return i[e].exports; var n = i[e] = {i: e, l: !1, exports: {}}; return t[e].call(n.exports, n, n.exports, s), n.l = !0, n.exports }s.m = t, s.c = i, s.d = function (t, e, n) { s.o(t, e) || Object.defineProperty(t, e, {enumerable: !0, get: n}) }, s.r = function (t) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {value: 'Module'}), Object.defineProperty(t, '__esModule', {value: !0}) }, s.t = function (t, e) { if (1 & e && (t = s(t)), 8 & e) return t; if (4 & e && typeof t === 'object' && t && t.__esModule) return t; var n = Object.create(null); if (s.r(n), Object.defineProperty(n, 'default', {enumerable: !0, value: t}), 2 & e && typeof t !== 'string') for (var i in t)s.d(n, i, function (e) { return t[e] }.bind(null, i)); return n }, s.n = function (t) { var e = t && t.__esModule ? function () { return t['default'] } : function () { return t }; return s.d(e, 'a', e), e }, s.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, s.p = '/'; var o = window['webpackJsonp'] = window['webpackJsonp'] || [], c = o.push.bind(o); o.push = e, o = o.slice(); for (var l = 0; l < o.length; l++)e(o[l]); var u = c; r.push([0, 'chunk-vendors']), n() })({0: function (t, e, n) { t.exports = n('56d7') }, 1313: function (t, e, n) {}, 1914: function (t, e, n) {}, '21bb': function (t, e, n) { 'use strict'; var i = n('1914'), a = n.n(i); a.a }, 2856: function (t, e, n) {}, '363a': function (t, e, n) { 'use strict'; var i = n('1313'), a = n.n(i); a.a }, '3e91': function (t, e, n) { 'use strict'; var i = n('999e'), a = n.n(i); a.a }, '56d7': function (t, e, n) { 'use strict'; n.r(e); n('cadf'), n('551c'), n('097d'); var i = n('2b0e'), a = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {attrs: {id: 'app'}}, [n('div', {attrs: {id: 'nav'}}, [n('router-link', {attrs: {to: '/'}}, [t._v('Home')]), t._v(' |\n    '), n('router-link', {attrs: {to: '/config'}}, [t._v('Config')]), t._v(' |\n    '), n('router-link', {attrs: {to: '/upload'}}, [t._v('Upload New File')]), t._v(' |\n    '), n('router-link', {attrs: {to: '/theory'}}, [t._v('Theory')])], 1), n('router-view')], 1) }, r = [], s = (n('5c0b'), n('2877')), o = {}, c = Object(s['a'])(o, a, r, !1, null, null, null); c.options.__file = 'App.vue'; var l = c.exports, u = n('8c4f'), p = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'home'}, [n('div', {attrs: {id: 'config'}}, [n('div', {staticClass: 'input-field col s12'}, [n('select', {attrs: {id: 'config_ticket_type', required: ''}}, [n('option', {attrs: {value: '', disabled: '', selected: ''}}, [t._v('Выбрать тип билета')]), n('option', {attrs: {value: 'all'}}, [t._v('Все')]), t._l(t.ticketTypes, function (e) { return n('option', {key: e, domProps: {value: e}}, [t._v(t._s(e))]) })], 2), n('label', [t._v('Тип билета')])]), t._m(0), t._m(1), t._m(2), n('div')]), n('button', {staticClass: 'btn right', on: {click: function (e) { t.get_data() }}}, [t._v('Получить данные')]), n('div', {attrs: {id: 'results'}})]) }, v = [function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'input-field col s12'}, [n('select', {attrs: {id: 'config_season', required: ''}}, [n('option', {attrs: {value: 'null', disabled: '', selected: ''}}, [t._v('Выбрать сезон')]), n('option', {attrs: {value: 'all'}}, [t._v('Все')]), n('option', {attrs: {value: 'high'}}, [t._v('Высокий')]), n('option', {attrs: {value: 'mid'}}, [t._v('Средний')]), n('option', {attrs: {value: 'low'}}, [t._v('Низкий')])]), n('label', [t._v('Сезон')])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'input-field col s12'}, [n('select', {attrs: {id: 'config_workday', required: ''}}, [n('option', {attrs: {value: '', disabled: '', selected: ''}}, [t._v('Выбрать день')]), n('option', {attrs: {value: 'all'}}, [t._v('Все')]), n('option', {attrs: {value: '1'}}, [t._v('Рабочий день')]), n('option', {attrs: {value: '0'}}, [t._v('Выходной')])]), n('label', [t._v('Тип дня')])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'input-field col s12'}, [n('select', {attrs: {id: 'config_intercept', required: ''}}, [n('option', {attrs: {value: '', disabled: ''}}, [t._v('Включить интерцепт')]), n('option', {attrs: {value: '1', selected: ''}}, [t._v('Да - Рекомендовано')]), n('option', {attrs: {value: '0'}}, [t._v('Нет')])]), n('label', [t._v('Интерцепт')])]) }], f = n('4d5c'), _ = n.n(f), d = {name: 'home', data: function () { return {s: {high: 'Высокий', mid: 'Средний', low: 'Низкий'}, w: {1: 'Да', 0: 'Нет'}, ticketTypes: []} }, mounted: function () { var t = this; try { fetch('/api/price-elasticity/ticket-types', {method: 'GET'}).then(function (t) { return t.json() }).then(function (e) { t.ticketTypes = e.message; var n = document.querySelector('#config_ticket_type'); for (var i in e.message) { var a = document.createElement('option'); a.value = e.message[i], a.text = e.message[i], n.append(a) } var r = document.querySelectorAll('select'), s = {}; _.a.FormSelect.init(r, s) }) } catch (t) { console.log('Problem with element '.concat(t)); var e = document.querySelectorAll('select'), n = {}; _.a.FormSelect.init(e, n) } }, methods: {get_data: function () { var t = this, e = document.querySelector('#config_ticket_type').value, n = document.querySelector('#config_season').value, i = document.querySelector('#config_workday').value, a = document.querySelector('#config_intercept').value; e !== '' && n !== '' && i !== '' ? fetch('/api/price-elasticity/roots/'.concat(e, '/').concat(n, '/').concat(i, '/').concat(a), {method: 'GET'}).then(function (t) { return t.json() }).then(function (e) { var n = e.message; for (var i in t.displayResults('<h4>Максимизация прибыли согласно модели</h4>', !0), n.message) { var a = n.message[i]; t.displayResults(t.shapeReults({ticketType: a.type, season: a.season, workday: a.workday}, {p: a.p, q: a.q, r: a.adj_r}), !1) } }) : this.displayResults('Пожалуйста сделайте выбор!') }, displayResults: function (t, e) { var n = document.querySelector('#results'); e && (n.innerHTML = ''), n.innerHTML = n.innerHTML + '<br>' + t }, shapeReults: function (t, e) { var n = '<p>Тип билета: ' + t.ticketType + '</p><p>Сезон: ' + this.s[t.season] + '</p><p>Рабочий день: ' + this.w[t.workday] + '</p><p>Оптимальная цена: ' + e.p + '</p><p>Количество проданых билетов: ' + e.q + '</p><p>Adjusted R squared: ' + e.r + '</p>'; return n }}}, h = d, m = (n('21bb'), Object(s['a'])(h, p, v, !1, null, null, null)); m.options.__file = 'Home.vue'; var y = m.exports, g = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'about'}, [n('h1', [t._v('Backend Resources Demo')]), n('p', [t._v('Click on the links below to fetch data from the Flask server')]), n('a', {attrs: {href: ''}, on: {click: function (e) { return e.preventDefault(), t.fetchResource(e) }}}, [t._v('Fetch')]), n('br'), n('a', {attrs: {href: ''}, on: {click: function (e) { return e.preventDefault(), t.fetchSecureResource(e) }}}, [t._v('Fetch Secure Resource')]), n('h4', [t._v('Results')]), t._l(t.resources, function (e) { return n('p', {key: e.timestamp}, [t._v('\n    Server Timestamp: ' + t._s(t._f('formatTimestamp')(e.timestamp)) + '\n  ')]) }), n('p', [t._v(t._s(t.error))])], 2) }, b = [], C = n('bc3a'), w = n.n(C), k = w.a.create({baseURL: '/api/', timeout: 5e3, headers: {'Content-Type': 'application/json'}}); k.interceptors.request.use(function (t) { return t.Authorization = 'Fake Token', t }), k.interceptors.response.use(function (t) { return t }, function (t) { return console.log(t), Promise.reject(t) }); var S = {fetchResults: function (t, e, n, i) { return k.get('price-elasticity/roots/'.concat(t, '/').concat(e, '/').concat(n, '/').concat(i), {timeout: 0}).then(function (t) { return t.data }).catch(function (t) { console.log(t.message) }) }, getTicketTypes: function () { return k.get('price-elasticity/ticket-types').then(function (t) { return t.data }).catch(function (t) { console.log(t.message) }) }, getConfig: function () { return k.get('price-elasticity/config').then(function (t) { return t.data.message }).catch(function (t) { console.log(t.message) }) }, postConfig: function (t) { return k.post('price-elasticity/config', t).then(function (t) { return t.data }).catch(function (t) { console.log(t.message) }) }}, T = {name: 'about', data: function () { return {resources: [], error: ''} }, methods: {fetchResource: function () { var t = this; S.fetchResource().then(function (e) { t.resources.push(e) }).catch(function (e) { t.error = e.message }) }, fetchSecureResource: function () { var t = this; S.fetchSecureResource().then(function (e) { t.resources.push(e) }).catch(function (e) { t.error = e.message }) }}}, E = T, j = (n('a822'), Object(s['a'])(E, g, b, !1, null, null, null)); j.options.__file = 'Api.vue'; var q = j.exports, x = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', [n('h5', [t._v('Тут вы можете загрузить новый файл')]), n('h6', [t._v('Важно! Структура файла должна быть:')]), n('p', [t._v('Тип билета (текст)')]), n('p', [t._v('Дата (формат: ДД/ММ/ГГГГ)')]), n('p', [t._v('Цена (формат: ХХХХ.ХХ)')]), n('p', [t._v('Количество билетов (формат: ХХХХ)')]), n('p', [t._v('Вы можете поменять именя колонок во вкладке Config')]), t._m(0), n('button', {staticClass: 'btn', on: {click: function (e) { t.postNewFile() }}}, [t._v('Загрузить')]), n('div', {attrs: {id: 'result'}})]) }, $ = [function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('form', {attrs: {action: '#'}}, [n('div', {staticClass: 'file-field input-field'}, [n('div', {staticClass: 'btn'}, [n('span', [t._v('File')]), n('input', {attrs: {type: 'file', id: 'file'}})]), n('div', {staticClass: 'file-path-wrapper'}, [n('input', {staticClass: 'file-path validate', attrs: {type: 'text'}})])])]) }], O = {methods: {postNewFile: function () { var t = document.querySelector('#file').files[0], e = new FormData(); e.append('file', t), fetch('/api/price-elasticity/data', {method: 'POST', body: e}).then(function (t) { console.log(t), t.ok && (document.querySelector('#result').innerHTML = '<h5>Готово!</5>') }) }}}, R = O, P = (n('5bca'), Object(s['a'])(R, x, $, !1, null, '2cdf02ab', null)); P.options.__file = 'File.vue'; var F = P.exports, A = function () { var t = this, e = t.$createElement; t._self._c; return t._m(0) }, M = [function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'left-align'}, [n('h3', [t._v('Предположения')]), n('h4', [t._v('Сильные')]), n('br'), n('h5', [t._v('Клиенты не имеют предпочтений кроме цены к детскому центру')]), n('h6', [t._v('Так как выборка данных не репрезентативна на уровне предприятия мы не можем судить о брендовых предпочтений клиентов. Следовательно центром нашего анализа будет выступать цена.')]), n('br'), n('h5', [t._v('Регион города Симферополя не влияет на предпочтения клиентов также сильно как цена')]), n('h6', [t._v('Так как целью анализа является влияние цены на спрос, на первом этапе мы не обращаем внимание на разницу в районах города.')]), n('br'), n('h4', [t._v('Слабые')]), n('br'), n('h5', [t._v('Ценовой регион в г.Симферополь отличается от ценового региона других городов Крыма')]), n('h6', [t._v('Типаж городов разный а значит мы фокусируем наше внимание на анализ по г. Симферополь.')]), n('br'), n('h5', [t._v('Присутствует достаточно сильный сезонный эффект')]), n('h6', [t._v('Анализ будет проведен посезонно.')]), n('br'), n('h5', [t._v('Присутствует достаточно сильный эффект выходного дня')]), n('h6', [t._v('Эластичность спроса зависит от того выходной ли день в момент покупки билета.')]), n('br'), n('h5', [t._v('Родителям менее важна цена взрослого билета')]), n('h6', [t._v('Предварительный анализ будет проведен на уровне цены Детского билета (СВП Детские)')]), n('br'), n('h5', [t._v('Месяц и очередность месяцев не имеют такого большого значения как тип сезона (Слабый / Сильный / Средний)')]), n('br'), n('h3', [t._v('Нормализация')]), n('br'), n('h4', [t._v('Нормализация в данном случае происходит в 4х частях')]), n('h6', [t._v('3 - Мы распределяем цены по ведрам (50-50 ведер должно быть достаточно) тем самым сглаживая функцию по оси цены')]), n('h6', [t._v('4 - Мы берем натуральный логарифм количества тем самым сглаживая эффект случайных клиентов')]), n('br'), n('h3', [t._v('Внешний вид функции')]), n('br'), n('h6', [t._v('Согласно экономической теории функция спроса принимает или линейный вид с негативным наклоном или concave квадратичной фунции')]), n('br'), n('h3', [t._v('Получение экстренумов как максимизация дохода')]), n('br'), n('h4', [t._v('Формулы')]), n('p', [t._v('TR (Total revenue) = Quantity * Price')]), n('p', [t._v('𝑙𝑜𝑔(𝑄𝑢𝑎𝑛𝑡𝑖𝑡𝑦)=𝑎∗𝑝2+𝑏∗𝑝+𝑐')]), n('p', [t._v('Где log - натуральный логарифм Так как натуральный логарифм это безопасное симметричное преобразование мы можем его сокращать следующим путем:')]), n('p', [t._v('𝑙𝑜𝑔(𝑄𝑢𝑎𝑛𝑡𝑖𝑡𝑦)=𝑎∗𝑝2+𝑏∗𝑝+𝑐')]), n('p', [t._v('𝑄=(𝑎∗𝑝2+𝑏∗𝑝+𝑐)𝑒')]), n('h4', [t._v('Подставляем в формулу дохода')]), n('p', [t._v('𝑇𝑅=(𝑎𝑝2+𝑏𝑝+𝑐)𝑒∗𝑝')]), n('br'), n('h4', [t._v('Первая функиця - квадратичная с интерcептом')]), n('p', [t._v('Для максимизации прибыли берем первый дериватив и прировнять к 0 - с интерцептом')]), n('p', [t._v('𝑑𝑇𝑅/𝑑𝑝=(𝑎𝑝2+𝑏𝑝+𝑐)𝑒−1((2𝑒+1)𝑎𝑝2+(𝑒+1)𝑏𝑝+𝑐)=!0')]), n('p', [t._v('Очевидно что при этом одна из частей мультипликации должна равняться 0')]), n('p', [t._v('часть  (𝑎𝑝2+𝑏𝑝+𝑐)𝑒−1  приравнивается к  (𝑎𝑝2+𝑏𝑝+𝑐)  и имеет стандартные корни')]), n('p', [t._v('часть  ((2𝑒+1)𝑎𝑝2+(𝑒+1)𝑏𝑝+𝑐)  это обычное квадратное уравнение')]), n('br'), n('h4', [t._v('Вторая функция - квадратичная без интерцепта приводится к следующей форме')]), n('p', [t._v('((2e+1)𝑎𝑥+(e+1)𝑏)(𝑎𝑥2+𝑏𝑥)e / 𝑎𝑥+𝑏')]), n('p', [t._v('Очевидно что левая половина возвращает отрицательную или слишком низкую цену что нам не подходит.')]), n('p', [t._v('Правая часть формулы - обычное квадратное уравнение с с = 0')])]) }], D = {}, H = D, L = (n('3e91'), Object(s['a'])(H, A, M, !1, null, null, null)); L.options.__file = 'Theory.vue'; var N = L.exports, G = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'container'}, [t._m(0), t._m(1), t._m(2), t._m(3), t._m(4), t._m(5), t._m(6), t._m(7), t._m(8), t._m(9), n('button', {staticClass: 'btn right', on: {click: function (e) { t.updateValues() }}}, [t._v('Обновить настройки')])]) }, J = [function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('h5', [t._v('Названия колонок')])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Тип билета')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_ticket_type_column', id: 'pe_ticket_type_column'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Цена')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_price_column', id: 'pe_price_column'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Количество билетов')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_quantity_column', id: 'pe_quantity_column'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Дата')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_date_column', id: 'pe_date_column'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('h5', [t._v('Настройки модели')])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Целевой год')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_target_year', id: 'pe_target_year'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Высокий сезон')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_season_high', id: 'pe_season_high'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Средний сезон')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_season_weak', id: 'pe_season_weak'}})])]) }, function () { var t = this, e = t.$createElement, n = t._self._c || e; return n('div', {staticClass: 'row'}, [n('div', {staticClass: 'col s6'}, [n('p', [t._v('Количество бинов')])]), n('div', {staticClass: 'col s6'}, [n('input', {staticClass: 'input-field', attrs: {type: 'text', name: 'pe_bins', id: 'pe_bins'}})])]) }], U = {mounted: function () { fetch('/api/price-elasticity/config', {method: 'GET'}).then(function (t) { return t.json() }).then(function (t) { try { var e = t.message, n = document.querySelectorAll('input'); for (var i in n)n[i].value = e[n[i].id] } catch (t) { console.log('Problem with element '.concat(i)) } }) }, methods: {updateValues: function () { var t = document.querySelectorAll('input'); console.log(t); var e = {}; for (var n in t)e[t[n].id] = t[n].value; fetch('/api/price-elasticity/config', {method: 'POST', mode: 'no-cors', cache: 'no-cache', credentials: 'same-origin', headers: {'Content-Type': 'application/json'}, redirect: 'follow', referrerPolicy: 'no-referrer', body: JSON.stringify(e)}).then(function (t) { console.log('Done!') }) }}}, V = U, z = (n('363a'), Object(s['a'])(V, G, J, !1, null, null, null)); z.options.__file = 'Config.vue'; var B = z.exports; i['a'].use(u['a']); var Q = new u['a']({routes: [{path: '/', name: 'home', component: y}, {path: '/api', name: 'api', component: q}, {path: '/upload', name: 'uploadFile', component: F}, {path: '/theory', name: 'theory', component: N}, {path: '/config', name: 'config', component: B}]}), I = n('2f62'); i['a'].use(I['a']); var K = new I['a'].Store({state: {}, mutations: {}, actions: {}}), W = (n('456d'), n('ac6a'), {formatTimestamp: function (t) { var e = new Date(t); return e.toLocaleTimeString('en-US') }}); Object.keys(W).forEach(function (t) { i['a'].filter(t, W[t]) }), i['a'].config.productionTip = !1, new i['a']({router: Q, store: K, render: function (t) { return t(l) }}).$mount('#app'), i['a'].config.devtools = !0 }, '5bca': function (t, e, n) { 'use strict'; var i = n('9f3e'), a = n.n(i); a.a }, '5c0b': function (t, e, n) { 'use strict'; var i = n('2856'), a = n.n(i); a.a }, '999e': function (t, e, n) {}, '9f3e': function (t, e, n) {}, a822: function (t, e, n) { 'use strict'; var i = n('a98e'), a = n.n(i); a.a }, a98e: function (t, e, n) {}})
// # sourceMappingURL=app.a04c27dc.js.map
